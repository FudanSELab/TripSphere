syntax = "proto3";

package org.tripsphere.hotel;

option java_multiple_files = true;
option java_package = "org.tripsphere.hotel";
option java_outer_classname = "HotelServiceProto";

option go_package = "tripsphere/hotel";

// room info
message Room {
  string name = 1;
  int32 total_number = 2;
  int32 remaining_number = 3;
  double bed_width = 4;
  int32 bed_number = 5;
  double min_area = 6;
  double max_area = 7;
  int32 people_number = 8;
  repeated string tags = 9;
}

// address info
message Address {
  string country = 1;
  string province = 2;
  string city = 3;
  string county = 4;
  string district = 5;
  string street = 6;
}

// the location of hotel
message Location {
  double lng = 1;
  double lat = 2;
}

// hotel info
message Hotel {
  string id = 1;
  string name = 2;
  Address address = 3;
  string introduction = 4;
  repeated string tags = 5;
  repeated Room rooms = 6;
  Location location = 7;
}

message AddHotelRequest {
  Hotel hotel = 1;
}

message AddHotelResponse {
  string id = 1;  //hotel id
}

message DeleteHotelRequest {
  string id = 1;  //hotel id
}

message DeleteHotelResponse {
  bool success = 1;
}

message ChangeHotelRequest {
  Hotel hotel = 1;  // must include id
}

message ChangeHotelResponse {
  bool success = 1;
}

message HotelPage {
  repeated Hotel content = 1; // content of page
  int32 total_pages = 2; //total number of pages
  int64 total_elements = 3; // total number of hotels
  int32 size = 4; // the size of page
  int32 number = 5; // size number, start from 0
  bool first = 6; // if this page is first page
  bool last = 7; // if this page is last page
  int32 number_of_elements = 8; // the actual number of hotel on this page
}

message FindHotelWithinRadiusPageRequest{
  Location location = 1;
  double radiusKm = 2;
  int32 number = 3;// page number
  int32 size = 4; // page size
  string name = 5;
  repeated string tags = 6 ;
}

message FindHotelWithinRadiusPageResponse{
  HotelPage hotel_page = 1;
}

message FindHotelsWithinCirclePageRequest{
  Location location = 1;
  double radiusKm = 2;
  int32 number = 3;// page number
  int32 size = 4; // page size
  string name = 5;
  repeated string tags = 6;
}

message FindHotelsWithinCirclePageResponse{
  HotelPage hotel_page = 1;
}

message FindHotelWithinRadiusRequest{
  Location location = 1;
  double radiusKm = 2;
  string name = 3;
  repeated string tags = 4;
}

message FindHotelWithinRadiusResponse{
  repeated Hotel content = 1;
}

message FindHotelsWithinCircleRequest{
  Location location = 1;
  double radiusKm = 2;
  string name = 3;
  repeated string tags = 4;
}

message FindHotelsWithinCircleResponse{
  repeated Hotel content = 1;
}

message FindHotelByIdRequest{
  string id = 1;
}

message FindHotelByIdResponse{
  Hotel hotel = 1;
}

service HotelService {
  rpc AddHotel(AddHotelRequest) returns (AddHotelResponse);

  rpc DeleteHotel(DeleteHotelRequest) returns (DeleteHotelResponse);

  rpc ChangeHotel(ChangeHotelRequest) returns (ChangeHotelResponse);

  //Find hotels located at the specified location and within the specified distance range
  //and list them in order from near to far, and result has been paginated
  rpc FindHotelWithinRadiusPage(FindHotelWithinRadiusPageRequest) returns (FindHotelWithinRadiusPageResponse);

  //Find hotels located at the specified location and within the specified distance range
  //and result has been paginated
  rpc FindHotelsWithinCirclePage(FindHotelsWithinCirclePageRequest) returns (FindHotelsWithinCirclePageResponse);

  //Find hotels located at the specified location and within the specified distance range
  //and list them in order from near to far
  rpc FindHotelWithinRadius(FindHotelWithinRadiusRequest) returns (FindHotelWithinRadiusResponse);

  //Find hotels located at the specified location and within the specified distance range
  rpc FindHotelsWithinCircle(FindHotelsWithinCircleRequest) returns (FindHotelsWithinCircleResponse);

  rpc FindHotelById(FindHotelByIdRequest) returns (FindHotelByIdResponse);
}